-- Rabbit Converter function for Postgres
-- License : MIT

DROP function if exists rabbit_uni_2_zawgyi;
create or replace function rabbit_uni_2_zawgyi(input_text text) 
returns text as $$
	select
	REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE ( REPLACE(input_text,'င်္', 'ၤ' ),'္တွ', '႖' ),'ါ်', 'ၚ' ),'ိံ', 'ႎ' ),'၎င်း', '၎' ),'[ဥဉ](?=္)', 'ၪ' ),'ဉ(?=[ုူ])', 'ဥ' ),'[ဥဉ](?=[့]?[်])', 'ဥ' ),'ည(?=[္ွ])', 'ၫ' ),'(္[က-အ])(ိ){0,1}ု', '$1$2ဳ' ),'(္[က-အ])ူ', '$1ဴ' ),'န(?=[ိီု်]?[ူွှု္])', 'ႏ' ),'န(?=်ု )', 'ႏ' ),'နြ', 'ႏြ' ),'္က', 'ၠ' ),'္ခ', 'ၡ' ),'္ဂ', 'ၢ' ),'္ဃ', 'ၣ' ),'္စ', 'ၥ' ),'္ဆ', 'ၦ' ),'္ဇ', 'ၨ' ),'္ဈ', 'ၩ' ),'္ဋ', 'ၬ' ),'ဋ္ဌ', '႒' ),'္ဌ', 'ၭ' ),'ဍ္ဍ', 'ၮ' ),'ဍ္ဎ', 'ၯ' ),'္ဏ', 'ၰ' ),'္တ', 'ၱ' ),'္ထ', 'ၳ' ),'္ဒ', 'ၵ' ),'္ဓ', 'ၶ' ),'္[နႏ]', 'ၷ' ),'္ပ', 'ၸ' ),'္ဖ', 'ၹ' ),'္ဗ', 'ၺ' ),'္ဘ', 'ၻ' ),'္မ', 'ၼ' ),'္လ', 'ႅ' ),'ဿ', 'ႆ' ),'ွှ', 'ႊ' ),'(ၤ)([က-အ])([ျြ]?)ိ', '$2$3ႋ' ),'(ၤ)([က-အ])([ျြ]?)ီ', '$2$3ႌ' ),'(ၤ)([က-အ])([ျြ]?)ံ', '$2$3ႍ' ),'(ၤ)([က-အ၀-၉])([ျြ]?)([ေ]?)', '$2$3$4$1' ),'ရ(?=([ိီ]?)[ုူွႊ])', '႐' ),'ဏ္ဍ', '႑' ),'ဋ္ဋ', '႗' ),'([က-အႏဩၪၮၯႆ႐႑႒႗႖])([ၠ-ၩၬၭၰ-ၼႅႊ])?([ျ-ှ]*)?ေ', 'ေ$1$2$3' ),'ြှ', 'ြႇ' ),'([က-အႏဩ])([ၠ-ၩၬၭၰ-ၼႅ])?(ြ)', '$3$1$2' ),'်', '္' ),'ျ', '်' ),'ြ', 'ျ' ),'ွ', 'ြ' ),'ှ', 'ွ' ),'([^်ည])ွ([ိီ]?)ု', '$1ႈ$2' ),'([ရ်ြႊႈ႐])([ူွ])?([ဲံ္ိီႋႌႍႎ]?)(ု)?့', '$1$2$3$4႕' ),'([ုနူွ])([ဲံ္ိီႋႌႍႎ]?)့', '$1$2႔' ),'([ျ])([က-အ])([ႇ]?)([ံိီႋႌႍႎ]?)ု', '$1$2$3$4ဳ' ),'([ျ])([က-အ])([ႇ]?)([ံိီႋႌႍႎ]?)ူ', '$1$2$3$4ဴ' ),'([်ြညဈဋဌဍဠဥ])([ွ]?)([ံိီႋႌႍႎ]?)ု', '$1$2$3ဳ' ),'([်ြညဈဋဌဍဠဥ])(ွ?)([ံိီႋႌႍႎ]?)ူ', '$1$2$3ဴ' ),'([ညဠဉ])ွ', '$1ႇ' ),'ွူ', 'ႉ' ),'ျ([ကဃဆဏတထဘယလယသဟ])', 'ၾ$1' ),'ၾ([ကဃဆဏတထဘယလယသဟ])([ြႊ])([ဲံိီႋႌႍႎ])', 'ႄ$1$2$3' ),'ၾ([ကဃဆဏတထဘယလယသဟ])([ြႊ])', 'ႂ$1$2' ),'ၾ([ကဃဆဏတထဘယလယသဟ])([ဳဴ]?)([ဲံိီႋႌႍႎ])', 'ႀ$1$2$3' ),'ျ([က-အ])([ြႊ])([ဲံိီႋႌႍႎ])', 'ႃ$1$2$3' ),'ျ([က-အ])([ြႊ])', 'ႁ$1$2' ),'ျ([က-အ])([ဳဴ]?)([ဲံိီႋႌႍႎ])', 'ၿ$1$2$3' ),'်ွ', 'ွ်' ),'်([ြႊ])', '$1ၽ' ),'([ဳဴ])(ံ?)႔', '$1$2႕' ),'ႏၱ', 'ႏၲ' ),'ႏၳ', 'ႏၴ' ),'([က-အ])([ၻၦ])ာ', '$1ာ$2' ),'ာ([ၻၦ])့', 'ာ$1႔' ),'၇((?=[က-အ]္)|(?=[ာ-ူဲံ-းြွ]))', 'ရ');

$$ language sql;



DROP function if exists rabbit_zawgyi_2_uni;
create or replace function rabbit_zawgyi_2_uni (input_text text) 
returns text as $$
   select
	REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE ( REGEXP_REPLACE(input_text ,'([ိီွု့႕])\1+', '$1','g' ),'​', '','g' ),'ွြ', 'ႊ','g' ),'(ွ|ႇ)', 'ှ','g' ),'ြ', 'ွ','g' ),'(ျ|ၾ|ၿ|ႀ|ႁ|ႂ|ႃ|ႄ)', 'ြ','g' ),'(်|ၽ)', 'ျ','g' ),'္', '်','g' ),'(ၦ|ၧ)', '္ဆ','g' ),'ၪ', 'ဉ','g' ),'ၫ', 'ည','g' ),'ၬ', '္ဋ','g' ),'ၭ', '္ဌ','g' ),'ၮ', 'ဍ္ဍ','g' ),'ၯ', 'ဍ္ဎ','g' ),'ၰ', '္ဏ','g' ),'(ၱ|ၲ)', '္တ','g' ),'ၠ', '္က','g' ),'ၡ', '္ခ','g' ),'ၢ', '္ဂ','g' ),'ၣ', '္ဃ','g' ),'ၥ', '္စ','g' ),'ၨ', '္ဇ','g' ),'ၩ', '္ဈ','g' ),'(ၳ|ၴ)', '္ထ','g' ),'ၵ', '္ဒ','g' ),'ၶ', '္ဓ','g' ),'ၷ', '္န','g' ),'ၸ', '္ပ','g' ),'ၹ', '္ဖ','g' ),'ၺ', '္ဗ','g' ),'ၼ', '္မ','g' ),'ႅ', '္လ','g' ),'ဳ', 'ု','g' ),'ဴ', 'ူ','g' ),'ဿ', 'ူ','g' ),'ႆ', 'ဿ','g' ),'ံႈ', 'ႈံ','g' ),'ႈ', 'ှု','g' ),'ႉ', 'ှူ','g' ),'ႊ', 'ွှ','g' ),'ျၤ', 'ၤျ','g' ),'ြ([က-အ])([ၤႋႍ])', '$1ြ$2','g' ),'(ေ)?([က-အ၀-၉])(ြ)?ၤ', 'င်္$1$2$3','g' ),'(ေ)?([က-အ])(ျ|ြ)?ႋ', 'င်္$1$2$3ိ','g' ),'(ေ)?([က-အ])(ျ)?ႌ', 'င်္$1$2$3ီ','g' ),'(ေ)?([က-အ])([ျြ])?ႍ', 'င်္$1$2$3ံ','g' ),'ႎ', 'ိံ','g' ),'ႏ', 'န','g' ),'႐', 'ရ','g' ),'႑', 'ဏ္ဍ','g' ),'႒', 'ဋ္ဌ','g' ),'မာ(ၻ|႓)', 'မ္ဘာ','g' ),'(ၻ|႓)', '္ဘ','g' ),'(႔|႕)', '့','g' ),'([က-အ])့ဲ', '$1ဲ့','g' ),'႖', '္တွ','g' ),'႗', 'ဋ္ဋ','g' ),'ြ([က-အ])([က-အ])?', '$1ြ$2','g' ),'([က-အ])ြ်', 'ြ$1်','g' ),'၇(?=[ာ-ူဲံ-းွး])', 'ရ','g' ),'ေ၇', 'ေရ','g' ),'၀(ီ|ု|ို|ူ|ံ|ွ|ှ)', 'ဝ$1','g' ),'([^၀၁၂၃၄၅၆၇၈၉])၀ါ', '$1ဝါ','g' ),'([၀၁၂၃၄၅၆၇၈၉])၀ါ(?!း)', '$1ဝါ','g' ),'^၀(?=ါ)', 'ဝ','g' ),'၀ိ(?! ?/)', 'ဝိ','g' ),'([^၀-၉])၀([^၀-၉ ]|[၊။])', '$1ဝ$2','g' ),'([^၀-၉])၀(?=[\f\n\r])', '$1ဝ','g' ),'([^၀-၉])၀$', '$1ဝ','g' ),'ေ([က-အဿ])(ှ)?(ျ)?', '$1$2$3ေ','g' ),'([က-အ])ေ([ျြွှ]+)', '$1$2ေ','g' ),'ဲွ', 'ွဲ','g' ),'([ိီ])ျ', 'ျ$1','g' ),'ွျ', 'ျွ','g' ),'့်', '့်','g' ),'ု(ိ|ီ|ံ|့)ု', 'ု$1','g' ),'(ု|ူ)(ိ|ီ)', '$2$1','g' ),'(ှ)(ျ|ြ)', '$2$1','g' ),'ဥ(?=[့]?[်ာ])', 'ဉ','g' ),'ဦ', 'ဦ','g' ),'စျ', 'ဈ','g' ),'ံ(ု|ူ)', '$1ံ','g' ),'ေ့ှ', 'ှေ့','g' ),'ေှာ', 'ှော','g' ),'ၚ', 'ါ်','g' ),'ေျှ', 'ျှေ','g' ),'(ိ|ီ)(ွ|ှ)', '$2$1','g' ),'ာ္([က-အ])', '္$1ာ','g' ),'္ြ်္([က-အ])', '်္$1ြ','g' ),'ြ္([က-အ])', '္$1ြ','g' ),'ံ္([က-အ])', '္$1ံ','g' ),'၎', '၎င်း','g' ),'၀(ါ|ာ|ံ)', 'ဝ$1','g' ),'ဥ္', 'ဉ္','g' ),'([က-အ])ြေွ', '$1ြွေ','g' ),'([က-အ])ျေွ(ှ)?', '$1ျွ$2ေ','g' ),'([က-အ])ွေျ', '$1ျွေ','g' ),'([က-အ])ေ(္[က-အ]ွ?)', '$1$2ေ','g' ),'း်', '်း','g' ),'ိ်|်ိ', 'ိ','g' ),'ို်', 'ို','g' ),' ့', '့','g' ),'့ံ', 'ံ့','g' ),'[ိ]+', 'ိ','g' ),'[်]+', '်','g' ),'[ွ]+', 'ွ','g' ),'[့]+', '့','g' ),'[ီ]+', 'ီ','g' ),'ိီ|ီိ', 'ီ','g' ),'ုိ', 'ို','g' ),'့့', '့','g' ),'ဲဲ', 'ဲ','g' ),'၄င်း', '၎င်း','g' ),'([ိီ])္([က-အ])', '္$2$1','g' ),'(ြေ)္([က-အ])', '္$2$1','g' ),'ံွ', 'ွံ','g' ),'၇((?=[က-အ]်)|(?=[ာ-ူဲံ-းွှ]))', 'ရ','g');
$$ language sql;

-- select rabbit_uni_2_zawgyi ('သီဟိုဠ်မှ ဉာဏ်ကြီးရှင်သည် အာယုဝဍ္ဎနဆေးညွှန်းစာကို ဇလွန်ဈေးဘေး ဗာဒံပင်ထက် အဓိဋ္ဌာန်လျက် ဂဃနဏဖတ်ခဲ့သည်။')
-- select rabbit_zawgyi_2_uni ('သီဟိုဠ္မွ ဉာဏ္ကျီးရွင္သည္ အာယုဝၯနဆေးညႊန္းစာကို ဇလြန္ဈေးဘေး ဗာဒံပင္ထက္ အဓိ႒ာန္လ်က္ ဂဃနဏဖတ္ခဲ့သည္။')
